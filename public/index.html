<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Discord にゃんこエージェント 管理パネル</title>
    <!-- Materialize CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        font-family: 'Roboto', sans-serif;
        padding: 20px;
        color: #333;
      }

      .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        grid-gap: 20px;
        padding: 20px 0;
      }

      .panel {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .panel:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      .panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--panel-color, #667eea), var(--panel-color-end, #764ba2));
      }

      .panel-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }

      .panel-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        background: linear-gradient(135deg, var(--panel-color, #667eea), var(--panel-color-end, #764ba2));
      }

      .panel-icon i {
        color: white;
        font-size: 24px;
      }

      .panel-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin: 0;
      }

      .panel-subtitle {
        font-size: 14px;
        color: #666;
        margin: 5px 0 0 0;
      }

      .metric-value {
        font-size: 32px;
        font-weight: 700;
        color: var(--panel-color, #667eea);
        margin: 10px 0;
        display: block;
      }

      .metric-label {
        font-size: 14px;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #f0f0f0;
        border-radius: 4px;
        overflow: hidden;
        margin: 15px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--panel-color, #667eea), var(--panel-color-end, #764ba2));
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      .chart-container {
        height: 200px;
        position: relative;
        margin: 20px 0;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin: 20px 0;
      }

      .stat-item {
        text-align: center;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
      }

      .stat-number {
        font-size: 24px;
        font-weight: 700;
        color: var(--panel-color, #667eea);
        display: block;
      }

      .stat-label {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
      }

      /* パネル別カラーテーマ */
      .panel-blue {
        --panel-color: #3b82f6;
        --panel-color-end: #1d4ed8;
      }

      .panel-green {
        --panel-color: #10b981;
        --panel-color-end: #047857;
      }

      .panel-orange {
        --panel-color: #f59e0b;
        --panel-color-end: #d97706;
      }

      .panel-red {
        --panel-color: #ef4444;
        --panel-color-end: #dc2626;
      }

      .panel-purple {
        --panel-color: #8b5cf6;
        --panel-color-end: #7c3aed;
      }

      .panel-cyan {
        --panel-color: #06b6d4;
        --panel-color-end: #0891b2;
      }

      .panel-pink {
        --panel-color: #ec4899;
        --panel-color-end: #db2777;
      }

      .panel-indigo {
        --panel-color: #6366f1;
        --panel-color-end: #4f46e5;
      }

      .status-list {
        list-style: none;
        padding: 0;
      }

      .status-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #f0f0f0;
      }

      .status-item:last-child {
        border-bottom: none;
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin-right: 10px;
      }

      .status-online { background: #10b981; }
      .status-offline { background: #ef4444; }
      .status-away { background: #f59e0b; }

      .activity-feed {
        max-height: 250px;
        overflow-y: auto;
      }

      .activity-item {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #f0f0f0;
      }

      .activity-item:last-child {
        border-bottom: none;
      }

      .activity-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--panel-color, #667eea), var(--panel-color-end, #764ba2));
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
      }

      .activity-icon i {
        color: white;
        font-size: 18px;
      }

      .activity-content {
        flex: 1;
      }

      .activity-title {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 2px;
      }

      .activity-time {
        font-size: 12px;
        color: #666;
      }

      .table-container {
        max-height: 300px;
        overflow-y: auto;
        margin: 20px 0;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
      }

      .data-table th {
        background: #f8f9fa;
        padding: 12px 8px;
        text-align: left;
        font-weight: 600;
        font-size: 12px;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 2px solid #e9ecef;
      }

      .data-table td {
        padding: 12px 8px;
        border-bottom: 1px solid #f0f0f0;
        font-size: 14px;
      }

      .data-table tr:hover {
        background: #f8f9fa;
      }

      .badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .badge-success { background: #d1fae5; color: #065f46; }
      .badge-warning { background: #fef3c7; color: #92400e; }
      .badge-error { background: #fee2e2; color: #991b1b; }
      .badge-info { background: #dbeafe; color: #1e40af; }

      @media (max-width: 768px) {
        .dashboard-container {
          grid-template-columns: 1fr;
          padding: 10px;
        }
        
        body {
          padding: 10px;
        }
        
        .panel {
          padding: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Discord サーバー概要 -->
      <div class="panel panel-blue">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">dns</i>
          </div>
          <div>
            <h3 class="panel-title">サーバー概要</h3>
            <p class="panel-subtitle">にゃんこエージェント</p>
          </div>
        </div>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-number" id="member-count">1,250</span>
            <span class="stat-label">メンバー数</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="online-count">892</span>
            <span class="stat-label">オンライン</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="channel-count">45</span>
            <span class="stat-label">チャンネル数</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="role-count">12</span>
            <span class="stat-label">ロール数</span>
          </div>
        </div>
      </div>

      <!-- メッセージ統計 -->
      <div class="panel panel-green">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">chat</i>
          </div>
          <div>
            <h3 class="panel-title">メッセージ統計</h3>
            <p class="panel-subtitle">過去24時間</p>
          </div>
        </div>
        <span class="metric-value" id="message-count">3,847</span>
        <span class="metric-label">総メッセージ数</span>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 78%;"></div>
        </div>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-number">2,156</span>
            <span class="stat-label">テキスト</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">1,691</span>
            <span class="stat-label">リアクション</span>
          </div>
        </div>
      </div>

      <!-- ユーザーアクティビティ -->
      <div class="panel panel-orange">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">trending_up</i>
          </div>
          <div>
            <h3 class="panel-title">ユーザーアクティビティ</h3>
            <p class="panel-subtitle">今週の動向</p>
          </div>
        </div>
        <span class="metric-value">+24.5%</span>
        <span class="metric-label">前週比増加率</span>
        <div class="chart-container">
          <canvas id="activity-chart"></canvas>
        </div>
      </div>

      <!-- モデレーション -->
      <div class="panel panel-red">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">security</i>
          </div>
          <div>
            <h3 class="panel-title">モデレーション</h3>
            <p class="panel-subtitle">セキュリティ状況</p>
          </div>
        </div>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-number">7</span>
            <span class="stat-label">警告</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">2</span>
            <span class="stat-label">タイムアウト</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">0</span>
            <span class="stat-label">BAN</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">15</span>
            <span class="stat-label">削除済み</span>
          </div>
        </div>
      </div>

      <!-- ボット状態 -->
      <div class="panel panel-purple">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">smart_toy</i>
          </div>
          <div>
            <h3 class="panel-title">ボット状態</h3>
            <p class="panel-subtitle">にゃんこエージェント</p>
          </div>
        </div>
        <ul class="status-list">
          <li class="status-item">
            <span>
              <span class="status-dot status-online"></span>
              メインボット
            </span>
            <span class="badge badge-success">稼働中</span>
          </li>
          <li class="status-item">
            <span>
              <span class="status-dot status-online"></span>
              音楽ボット
            </span>
            <span class="badge badge-success">稼働中</span>
          </li>
          <li class="status-item">
            <span>
              <span class="status-dot status-away"></span>
              ログボット
            </span>
            <span class="badge badge-warning">メンテ中</span>
          </li>
        </ul>
      </div>

      <!-- 最新アクティビティ -->
      <div class="panel panel-cyan">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">history</i>
          </div>
          <div>
            <h3 class="panel-title">最新アクティビティ</h3>
            <p class="panel-subtitle">リアルタイム更新</p>
          </div>
        </div>
        <div class="activity-feed">
          <div class="activity-item">
            <div class="activity-icon">
              <i class="material-icons">person_add</i>
            </div>
            <div class="activity-content">
              <div class="activity-title">新メンバーが参加しました</div>
              <div class="activity-time">2分前</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">
              <i class="material-icons">chat</i>
            </div>
            <div class="activity-content">
              <div class="activity-title">一般チャンネルに新しい投稿</div>
              <div class="activity-time">5分前</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">
              <i class="material-icons">star</i>
            </div>
            <div class="activity-content">
              <div class="activity-title">メッセージにリアクションが追加</div>
              <div class="activity-time">8分前</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">
              <i class="material-icons">volume_up</i>
            </div>
            <div class="activity-content">
              <div class="activity-title">ボイスチャンネルに参加</div>
              <div class="activity-time">12分前</div>
            </div>
          </div>
        </div>
      </div>

      <!-- サーバーパフォーマンス -->
      <div class="panel panel-pink">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">speed</i>
          </div>
          <div>
            <h3 class="panel-title">パフォーマンス</h3>
            <p class="panel-subtitle">システム状況</p>
          </div>
        </div>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-number">12ms</span>
            <span class="stat-label">API応答時間</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">99.9%</span>
            <span class="stat-label">稼働率</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">2.1GB</span>
            <span class="stat-label">メモリ使用量</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">15%</span>
            <span class="stat-label">CPU使用率</span>
          </div>
        </div>
      </div>

      <!-- 人気チャンネル -->
      <div class="panel panel-indigo">
        <div class="panel-header">
          <div class="panel-icon">
            <i class="material-icons">leaderboard</i>
          </div>
          <div>
            <h3 class="panel-title">人気チャンネル</h3>
            <p class="panel-subtitle">メッセージ数ランキング</p>
          </div>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>チャンネル</th>
                <th>メッセージ数</th>
                <th>状況</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td># 一般</td>
                <td>1,284</td>
                <td><span class="badge badge-success">活発</span></td>
              </tr>
              <tr>
                <td># 雑談</td>
                <td>956</td>
                <td><span class="badge badge-success">活発</span></td>
              </tr>
              <tr>
                <td># ゲーム</td>
                <td>673</td>
                <td><span class="badge badge-info">普通</span></td>
              </tr>
              <tr>
                <td># 音楽</td>
                <td>445</td>
                <td><span class="badge badge-warning">低調</span></td>
              </tr>
              <tr>
                <td># 開発</td>
                <td>234</td>
                <td><span class="badge badge-warning">低調</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script>
      // チャートの初期化
      const ctx = document.getElementById('activity-chart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['月', '火', '水', '木', '金', '土', '日'],
          datasets: [{
            label: 'アクティブユーザー数',
            data: [320, 285, 410, 375, 442, 398, 456],
            borderColor: '#f59e0b',
            backgroundColor: 'rgba(245, 158, 11, 0.1)',
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(0, 0, 0, 0.1)'
              }
            },
            x: {
              grid: {
                color: 'rgba(0, 0, 0, 0.1)'
              }
            }
          }
        }
      });

      // リアルタイム更新のシミュレーション
      setInterval(() => {
        // メンバー数をランダムに更新
        const memberCount = document.getElementById('member-count');
        const currentCount = parseInt(memberCount.textContent);
        const newCount = currentCount + Math.floor(Math.random() * 3) - 1;
        if (newCount > 0) {
          memberCount.textContent = newCount.toLocaleString();
        }

        // オンライン数をランダムに更新
        const onlineCount = document.getElementById('online-count');
        const currentOnline = parseInt(onlineCount.textContent);
        const newOnline = currentOnline + Math.floor(Math.random() * 10) - 5;
        if (newOnline > 0 && newOnline < newCount) {
          onlineCount.textContent = newOnline.toLocaleString();
        }

        // メッセージ数をランダムに更新
        const messageCount = document.getElementById('message-count');
        const currentMessages = parseInt(messageCount.textContent.replace(',', ''));
        const newMessages = currentMessages + Math.floor(Math.random() * 5);
        messageCount.textContent = newMessages.toLocaleString();
      }, 5000);
    </script>
  </body>
</html>